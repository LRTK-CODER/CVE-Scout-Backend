from flask import Flask, jsonify, request
from flask_restx import Api
from pymongo import MongoClient
from .route import db_api, cve_api

app = Flask(__name__)
api = Api(
    app,
    version="1.0",
    title="CVE-Scout의 API 문서",
    description="NVD API에서 파싱한 CVE 정보를 파싱 후 Mongodb에 저장하여 각 연도의 CVE 개수 등을 제공하는 API",
    doc="/api-docs",
)

mongo_client = MongoClient(host="localhost", port=27017)

api.add_namespace(db_api)
api.add_namespace(cve_api)

if __name__ == "__main__":
    app.run(host="0.0.0.0", debug=False)
