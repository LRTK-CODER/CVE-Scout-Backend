#!/bin/bash
export FLASK_APP=./API/app.py
export CHATGPT_API="your_actual_api_key_here"

if [ -z "$CHATGPT_API" ]
then
    echo "CHATGPT_API is not set. Please set it before running the application."
    exit 1
else
    echo "CHATGPT_API is set."
fi

# Check if FLASK_APP environment variable is set
if [ -z "$FLASK_APP" ]
then
    echo "FLASK_APP is not set. Setting it now..."
    echo "FLASK_APP is now set to $FLASK_APP"
else
    echo "FLASK_APP is already set to $FLASK_APP"
fi

# Run gunicorn
echo "Run Gunicorn"
gunicorn -w 4 -b 0.0.0.0:5000 --access-logfile access.log --error-logfile error.log API.app:app
